# The royal.yaml file exists at the root of every agent project.
# It's used to set up the builder (and if applicable, translation) services.
# The following file is simply an EXAMPLE of how a royal.yaml config file looks like, and should not be used
# anywhere outside a testing environment.

name: list-agent
version: 1.0
author: pygrum
url: https://github.com/pygrum/Empress
supported_os: [ linux ]

# The command schema defines the possible tasks that can be used with the agent.
# If the agent doesn't use tasks to operate, then this configuration parameter is not necessary.
# On installation of the agent, the command schema is used by the builder when an operator requests to
# view tasks.
cmd_schema:
  - name: ls
    usage: ls [path]
    min_args: 0
    max_args: 1
    # When opcode is specified, the provided integer opcode is used in place of the command name, promoting better OpSec
    opcode: 0x1
    description_short: list files in a directory.
    description_long: list files in a directory.

builder:
  # agent source code root
  source_dir: /src
  # These are custom build arguments that can be used for building, in addition to default build arguments provided
  # by the C2 itself.
  build_args:
    - name: mode
      type: string
      description: the mode of the compiled agent - session / beacon
      default: session
      required: true
      choices:
        - session
        - beacon

    - name: debug
      type: bool
      description: compile the agent in debug / verbose mode, meaning that all errors are included
      default: false
      required: true

    - name: callback_interval
      type: int
      description: the agent attempts to register to the server every callback_interval±(callback_salt/1000) seconds
      default: 10
      required: true
    - name: callback_salt
      type: int
      description: callback frequency variance in milliseconds
      default: 1000
      required: true

    - name: interval
      type: int
      description: In beacon mode, the agent calls back to the C2 server every interval±(salt/1000) seconds
      default: 10
      required: true
    - name: salt
      type: int
      description: beacon / command callback frequency variance in milliseconds
      default: 1000
      required: true
